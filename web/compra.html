<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Servisis</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="plugin/bootstrap-4.1.1/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="plugin/bootstrap-4.1.1/css/bootstrap-grid.min.css" rel="stylesheet" type="text/css"/>        
        <link href="css/style.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">                      
    </head>
    <body class="app sidebar-mini rtl">
        <header class="navbar navbar-light bg-light">
            <div class="container-fluid">
                <div class="col-md-12 ">    
                    <a href="index.html" class="btn btn-outline-danger" >Cerrar</a>    
                    <button class="btn btn-success" data-toggle="modal" data-target=".modal_buscar_articulo" 
                            style="width: 120px !important  ; color: white " type="button"  onclick="cargar_articulos();">
                        <i class="fa fa-plus-circle" aria-hidden="true" style="color:#495057" ></i>Buscar</button>                                                                  
                    <!--<button class="btn btn-warning" style="width: 120px !important ; color: white " type="button"><i class="fa fa-edit fa-1x" aria-hidden="true" style="color: #495057; flex-align: auto"></i>editar</button>-->                                                                  
                    <!--<button class="btn btn-danger" style="width: 120px !important " type="button"><i class="fa fa-minus-circle fa-1x" aria-hidden="true" style="color:#495057" ></i>eliminar</button>-->                                                                  
                    <!--<button class="btn btn-primary" style="width: 120px !important " type="button"><i class="fa fa-retweet fa-1x" aria-hidden="true" style="color:#495057" ></i>actualizar</button>-->                                                                                     
                </div>
            </div>            
        </header>
        <div class="container-fluid contenedor" >           
            <div class="form-row " style="padding-top: 15px;">
                <div class="form-group col-md-3" style="margin-bottom: 0.5rem;">                    
                    <div class="input-group ">
                        <div class="input-group-prepend">
                            <div class="input-group-text" id="btnGroupAddon">Fecha</div>
                        </div>
                        <input class="form-control form-control-sm" id="text_fecha" type="date" class="form-control" id="com_fecha">                        
                    </div>
                </div>
                <div class="form-group col-md-4" style="margin-bottom: 0.5rem;">                    
                    <div class="input-group ">
                        <div class="input-group-prepend">
                            <div class="input-group-text" id="btnGroupAddon">Documento</div>
                        </div>
                        <input class="form-control form-control-sm" id="text_documento" type="text" class="form-control" id="com_fecha">                        
                    </div>
                </div>
                <div class="form-group col-md-3" style="margin-bottom: 0.5rem;">                    
                    <div class="input-group ">
                        <div class="input-group-prepend">
                            <div class="input-group-text" id="btnGroupAddon">Serie</div>
                        </div>
                        <input class="form-control form-control-sm"  id="text_serie" type="text" class="form-control" id="com_fecha">                        
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-4" style="margin-bottom: 0.5rem;">                    
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text" id="btnGroupAddon">Proveedor</div>
                        </div>
                        <label class="form-control form-control-sm" id="text_proveedor" data-toggle="modal" data-target=".model-proveedor" onclick="cargar_proveedor()"></label>                        
                    </div>
                </div>
                <div class="form-group col-md-3" style="margin-bottom: 0.5rem;">                    
                    <div class="input-group ">
                        <div class="input-group-prepend">
                            <div class="input-group-text" id="btnGroupAddon">Cod. control</div>
                        </div>
                        <input class="form-control form-control-sm" id="text_codigo_control" type="text" class="form-control" id="com_fecha">                        
                    </div>
                </div>
                <div class="form-group col-md-3" style="margin-bottom: 0.5rem;">                    
                    <div class="input-group ">
                        <div class="input-group-prepend">
                            <div class="input-group-text" id="btnGroupAddon">Autorizaci√≥n</div>
                        </div>
                        <input class="form-control form-control-sm" id="text_autorizacion" type="text" class="form-control" id="com_fecha">                        
                    </div>
                </div>
            </div>

            <div class="form-row" >
                <div class="from-group col-md-3" style="margin-bottom: 0.5rem;">                                   
                    <div class="input-group">      
                        <div class="input-group-prepend ">
                            <div class="input-group-text" id="btnGroupAddon"> 
                                <span>
                                    <i class="fa fa-search" aria-hidden="true"></i>                                           
                                </span>
                            </div>
                        </div>
                        <input class="form-control form-control-sm" type="text" name="x" placeholder="Buscar por clave">                                                
                    </div>
                </div> 
            </div> 
        </div> 
        <div class="dropdown-divider"></div>

        <div class="card-body container-fluid">
            <div class="table-responsive">
                <table class="table table-bordered table-hover" id="tabla_compra">
                    <thead>
                        <tr class="success" style="background: whitesmoke;"> 
                            <th scope="col">Codigo Articulo</th>
                            <th scope="col">cantidad</th>
                            <th scope="col">unidad de medida</th>
                            <th scope="col">Descripcion</th>
                            <th scope="col">factor</th>
                            <th scope="col">Precio Compra</th>
                            <th scope="col">Precio venta</th>                           
                            <th scope="col">Total</th>
                            <th scope="col">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tbody_tabla_compra">
                    </tbody>
                </table>
            </div>        
        </div>

        <div class="dropdown-divider"></div>

        <footer class="page-footer font-small blue">            
<!--            <div class="modal-body">
                <form class="container-fluid">
                    <div class="form-row">
                        <div class="form-group col-md-6 text-left">
                            <h3>Total de la Compra</h3>                                    
                            <h5 id="total_precio" >Bs.500.000</h5>
                        </div>                                                                                                                                                  
                        <div class="form-group col-md-6 align-content-between ">                                   
                            <label for="art_clave">Forma de pago</label>
                            <select id="inputState" class="form-control">                                       
                                <option value="1">Efectivo</option>                                                                                                                        
                            </select>
                        </div>
                    </div>                                 
                </form>                       
            </div>-->
            <div class="footer-copyright text-center py-3">                
                <button class="btn btn-success"  onclick="cerrar_compra();
                        "style="width: 300px !important" type="button">Cerrar compra</button>                                                                                                     
            </div>            
        </footer>

        <!--Modal Buscar Articulo-->
        <div class="modal fade modal_buscar_articulo" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header" style="background-color: whitesmoke">
                        <h5 class="modal-title" id="exampleModalLabel">Buscar articulo</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="container-fluid">
                            <div class="form-row">
                                <div class="form-group col-md-12" style="margin-bottom: 0.5rem;">                    
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text" id="btnGroupAddon">Buscar</div>                                           
                                        </div>
                                        <input class="form-control form-control-sm" type="text" class="form-control">                        
                                        <button type="button" class="btn btn-outline-success">Buscar</button>
                                    </div>
                                </div> 
                            </div>

                            <hr>                            
                            <ul class="list-group lista_compra"  id="lista_articulos">
                            </ul> 
                            <!--                                <div class="form-group col-md-3">                                   
                                                                <select id="inputState" class="form-control">                                       
                                                                    <option value="1">Filtrar Todos</option>
                                                                    <option value="2">Sin Stock</option>
                                                                    <option value="3">Por Departamento</option>
                                                                    <option value="3">Por Categoria</option>
                                                                </select>
                                                            </div>-->

                            <!--                            <div class="table-responsive">
                                                            <table class="table table-bordered table-hover">
                                                                <thead>
                                                                    <tr class="success">
                                                                        <th scope="col">nombre</th>
                                                                        <th scope="col">Descripcion</th>
                                                                        <th scope="col">Existencias</th>                                           
                                                                        <th scope="col">Precio</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>                                           
                                                                        <td>Mark</td>
                                                                        <td>df</td>
                                                                        <td>Otto</td>
                                                                        <td>@mdo</td>
                                                                    </tr>
                                                                    <tr>                                           
                                                                        <td>Jacob</td>
                                                                        <td>Mark</td>
                                                                        <td>Thornton</td>
                                                                        <td>@fat</td>
                                                                    </tr>
                                                                    <tr>                                            
                                                                        <td>Larry</td>
                                                                        <td>Mark</td>
                                                                        <td>the Bird</td>
                                                                        <td>@twitter</td>
                                                                    </tr>                                      
                                                                </tbody>
                                                            </table>
                                                        </div>  -->
                        </form>                       
                    </div>
                    <div class="modal-footer justify-content-center">
                        <div class="row" >
                            <div class=" col-md-12">                                                                                                     
                                <button type="button" class="btn btn-secondary " data-dismiss="modal">Cancelar</button>
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Model Proveedor-->
        <div class="modal fade model-proveedor" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="background-color: whitesmoke">
                        <h5 class="modal-title" id="exampleModalLabel">Seleccionar Proveedor</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="container-fluid">
                            <div class="form-group">      
                                <div class="input-group">      
                                    <div class="input-group-prepend">
                                        <div class="input-group-text" id="btnGroupAddon"> 
                                            <span>
                                                <i class="fa fa-search" aria-hidden="true"></i>                                           
                                            </span>
                                        </div>
                                    </div>
                                    <input type="text" class="form-control" name="x" placeholder="Buscar...">                                
                                    <button type="button" class="btn btn-outline-success" data-toggle="modal" data-target=".modal-add-categoria" >Buscar</button>
                                </div>
                            </div>
                            <hr>                            
                            <ul class="list-group lista_compra"  id="lista_proveedor">
                            </ul> 
                        </form>                       
                    </div>
                    <div class="modal-footer justify-content-center">
                        <div class="row" >
                            <div class=" col-md-12">                                
                                <button type="button" class="btn btn-primary" onclick="ver_pagina('persona.html');">Agregar</button>
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Modal Agregar Compra-->
        <div class="modal fade model-compra" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header" style="background-color: whitesmoke">
                        <h5 class="modal-title" id="exampleModalLabel">Compra</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="container-fluid">
                            <h6 class="modal-title"  id="exampleModalLabel">Informacion del articulo</h6>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text" id="btnGroupAddon">Clave</div>
                                        </div>
                                        <label class="form-control form-control-sm" id="text_clave" style="background: whitesmoke"></label>                        
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text" id="btnGroupAddon">Nombre</div>
                                        </div>
                                        <label class="form-control form-control-sm" id="text_nombre" style="background: whitesmoke"></label>                        
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text" id="btnGroupAddon">Descripci√≥n</div>
                                    </div>
                                    <label class="form-control form-control-sm" id="text_descripcion" style="background: whitesmoke"></label>                                          
                                </div>
                            </div>
                            <div class="dropdown-divider"></div>
                            <h6 class="modal-title"  id="exampleModalLabel">Precios</h6>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text" id="btnGroupAddon">Precio</div>
                                        </div>
                                        <label class="form-control form-control-sm" id="text_precio" style="background: whitesmoke"></label>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text" id="btnGroupAddon">%</div>
                                        </div>
                                        <label class="form-control form-control-sm" id="text_margen" style="background: whitesmoke"></label>                        
                                    </div>
                                </div>
                            </div>
                            <div class="dropdown-divider"></div>
                            <h6 class="modal-title"  id="exampleModalLabel">Detalle de Compra</h6>
                            <div class="form-row">
                                <div class="form-group col-md-4">
                                    <label class="mr-sm-2" for="text_cantidad">Cantidad</label>                                         
                                    <input type="number" class="form-control" id="text_cantidad">
                                </div>    
                                <div class="form-group col-md-4">
                                    <label for="text_unidad">Unidad de medida</label>
                                    <input class="form-control input_hover input-color" readonly="readonly" data-toggle="modal" data-target=".bd-unidad" id="text_unidad" style="background: white" onclick="cargar_unidad_medida();">
                                </div> 
                                <div class="form-group col-md-2">
                                    <label for="text_factor">factor</label>
                                    <input type="number" class="form-control" id="text_factor">
                                </div> 

                            </div> 
                            <div class="form-row">
                                <div class="form-group col-md-4">
                                    <label for="text_precio_compra">Precio de Compra</label>
                                    <div class="input-group">
                                        <input type="Number" class="form-control" id="text_precio_compra">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text">0.0</div>
                                        </div>
                                    </div>
                                </div>    
                                <div class="form-group col-md-4">
                                    <label for="text_precio_venta">Precio de Venta</label>
                                    <div class="input-group">
                                        <input type="Number" class="form-control"id="text_precio_venta">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text" id="btnGroupAddon">0.0</div>
                                        </div>
                                    </div>
                                </div> 
                                <div class="form-group col-md-4">
                                    <label for="text_almacen">Almacen</label>
                                    <input type="text" class="form-control" id="text_almacen" data-toggle="modal" data-target=".model-almacen" onclick="cargar_almacen();">
                                </div> 
                            </div>                           
                        </form>                       
                    </div>
                    <div class="modal-footer justify-content-center">
                        <div class="row" >
                            <div class=" col-md-12">
                                <button type="button" class="btn btn-secondary " data-dismiss="modal">Cancelar</button>
                                <button id="btn_marcar_detalle" type="button" class="btn btn-primary " onclick="marcar_detalle_compra(this);">Guardar</button>
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Seleccionar almacen-->
        <div class="modal fade model-almacen" id="myModal"  tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content" style="background-color: whitesmoke">
                    <div class="modal-header" style="background-color: #929292 ">
                        <h5 class="modal-title" id="exampleModalLabel">Seleccionar Almacen</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="container-fluid">
                            <div class="input-group">      
                                <div class="input-group-prepend">
                                    <div class="input-group-text" id="btnGroupAddon"> 
                                        <span>
                                            <i class="fa fa-search" aria-hidden="true"></i>                                           
                                        </span>
                                    </div>
                                </div>
                                <input type="text" class="form-control" name="x" placeholder="Buscar..." onkeyup="buscar_almacen(this);">                                                                
                            </div>
                            <hr>                            
                            <ul class="list-group lista_alm" id="lista_almacen">

                            </ul>                      
                        </form>                       
                    </div>
                    <div class="modal-footer justify-content-center">
                        <div class="row" >
                            <div class=" col-md-12">                               
                                <button type="button" class="btn btn-primary ">Aceptar</button>
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!--Unidad de medida-->        
        <div class="modal fade bd-unidad" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="background-color: whitesmoke">
                        <h5 class="modal-title" id="exampleModalLabel">Seleccionar Unidad de Medida</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="container-fluid">
                            <div class="input-group">      
                                <div class="input-group-prepend">
                                    <div class="input-group-text" id="btnGroupAddon"> 
                                        <span>
                                            <i class="fa fa-search" aria-hidden="true"></i>                                           
                                        </span>
                                    </div>
                                </div>
                                <input type="text" class="form-control" name="x" placeholder="Buscar..." onkeyup="buscar_unidad_medida(this);">                                
                                <button type="button" class="btn btn-outline-success" data-toggle="modal" data-target=".modal-add-unidad">Agregar Nuevo</button>
                            </div>
                            <hr>                            
                            <ul class="list-group lista_art" id="lista_unidad_medida">

                            </ul>                      
                        </form>                       
                    </div>
                    <div class="modal-footer justify-content-center">
                        <div class="row" >
                            <div class=" col-md-12">                               
                                <button type="button" class="btn btn-primary ">Aceptar</button>
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--agregar modal unidad de medida-->
        <div class="modal fade modal-add-unidad" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"  style="overflow-y: scroll;"> 
            <div class="modal-dialog" role="document">
                <div class="modal-content" style="background-color: whitesmoke" >
                    <div class="modal-header" style="background-color: #929292 ">
                        <h5 class="modal-title" id="exampleModalLabel">Agregar Unidad de Medida</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group col-md-12">
                            <label for="unidad_medida_nombre">Nombre</label>
                            <input type="text" class="form-control" id="unidad_medida_nombre" placeholder="Nombre">
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <div class="row" >
                            <div class=" col-md-12">                                   
                                <button type="button" class="btn btn-outline-success" onclick="registrar_unidad_medida();">Guardar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Modal Cerrar Compra-->
        <div class="modal fade model-cerrar-compra" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="background-color: whitesmoke">
                        <h5 class="modal-title" id="exampleModalLabel">Pago de Compra</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="container-fluid">
                            <div class="form-row">
                                <div class="form-group col-md-12 text-center">
                                    <h2>Total de la Compra</h2>                                    
                                    <h4 id="precio_compra">Bs. 500.000</h4>
                                </div>                                                                                               
                            </div> 
                            <div class="form-row">                                                                                              
                                <div class="form-group col-md-12 align-content-between ">                                   
                                    <label for="art_clave">Forma de pago</label>
                                    <select id="inputState" class="form-control">                                       
                                        <option value="1">Efectivo</option>                                                                                                                        
                                    </select>
                                </div>
                            </div>                                 
                        </form>                       
                    </div>
                    <div class="modal-footer justify-content-center">
                        <div class="row" >
                            <div class=" col-md-12">                                     
                                <button type="button" class="btn btn-primary" style="width: 120px !important; ">Comprar</button>
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="plugin/jquery/jquery.min.js" type="text/javascript"></script>   
        <script src="plugin/templateAdmin/js/popper.min.js" type="text/javascript"></script>
        <script src="plugin/bootstrap-4.1.1/js/bootstrap.min.js" type="text/javascript"></script>                                  
        <script src="js/verifySession.js" type="text/javascript"></script>        
        <script src="js/Compra/compra.js" type="text/javascript"></script>
        <script src="js/load.js" type="text/javascript"></script>                
        <script type="text/javascript">
                                    if (document.location.hostname == 'pratikborsadiya.in') {
                                        (function (i, s, o, g, r, a, m) {
                                            i['GoogleAnalyticsObject'] = r;
                                            i[r] = i[r] || function () {
                                                (i[r].q = i[r].q || []).push(arguments)
                                            }, i[r].l = 1 * new Date();
                                            a = s.createElement(o),
                                                    m = s.getElementsByTagName(o)[0];
                                            a.async = 1;
                                            a.src = g;
                                            m.parentNode.insertBefore(a, m)
                                        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
                                        ga('create', 'UA-72504830-1', 'auto');
                                        ga('send', 'pageview');
                                    }
        </script>
    </body>
</html>
